
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Cocoa Discord Utils Guide</title>
        <meta name="description" content="Guide for Cocoa Discord Utils" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" 
            href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/styles/github-dark.min.css" 
            integrity="sha512-rO+olRTkcf304DQBxSWxln8JXCzTHlKnIdnMUwYvQa9/Jd4cQaNkItIUj6Z4nvW1dqK0SKXLbn9h4KwZTNtAyw==" 
            crossorigin="anonymous" referrerpolicy="no-referrer" 
        />
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/@tailwindcss/typography@0.5.x/dist/typography.min.css"
        />
        <link
            rel="stylesheet"
            href="https://fonts.googleapis.com/css?family=Inter"
        />
    </head>
    <body>
        <article class="prose prose-lg sm:prose-xl lg:prose-2xl">
            <a href="../docs/index.html">Guide Index</a>
            <a href="../index.html">TypeDoc Index</a>
            <h1 id="event-handler-for-management-center">Event Handler for Management Center</h1>
<h2 id="both-center-error">Both Center: &quot;error&quot;</h2>
<p>You can add a event listener to the Management Center.</p>
<pre><code class="language-ts"><span class="hljs-comment">// This one is Message Center, Slash Center is slightly different</span>
center.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;error&quot;</span>, <span class="hljs-function">(<span class="hljs-params">name, err, msg</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(chalk.<span class="hljs-title function_">red</span>(<span class="hljs-string">`Command <span class="hljs-subst">${name}</span> just error!`</span>));
    <span class="hljs-keyword">await</span> msg.<span class="hljs-property">channel</span>.<span class="hljs-title function_">send</span>(<span class="hljs-string">`Oops! This error occured: <span class="hljs-subst">${err.message}</span>`</span>);
});
<span class="hljs-comment">// Note that you don&#x27;t need to care if msg.channel.send will cause error</span>
<span class="hljs-comment">// Command Center will handle error from error handler as long as you `await`</span>
</code></pre>
<p>Everytime an error occured in your command, this callback function will be called.</p>
<p>Use case is the case given above, the bot can reply to the user telling them directly what happened. So you don&#39;t need to check terminal to investigate.</p>
<p>The error handler is under try catch, as long as you await the potential harmful async function. It will be fine. Please note that we don&#39;t provide <code>on error error</code> event handler. That is too much.</p>
<p><strong>Tips</strong>: It is always best practice to use <code>await</code> on every expression that is async including <code>message.reply</code> <code>message.channel.send</code> <code>ctx.reply</code> etc.</p>
<p>Otherwise, the try-catch might not be able to catch and your bot will <em>boom</em></p>
<h2 id="message-center-message">Message Center: &quot;message&quot;</h2>
<pre><code class="language-ts">center.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;message&quot;</span>, <span class="hljs-function">(<span class="hljs-params">name, msg</span>) =&gt;</span> {
    <span class="hljs-comment">// do smth</span>
});
</code></pre>
<p>This will be call after a message is handled by command if it exists.
Otherwise after it has been checked that this command does not exist.</p>
<p><code>name</code> - The name of function handled, Empty String if is not handled (Not a command).</p>
<p><code>msg</code> - Original Message Unmodified</p>
<h2 id="slash-center-interaction">Slash Center: &quot;interaction&quot;</h2>
<pre><code class="language-ts">center.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;interaction&quot;</span>, <span class="hljs-function">(<span class="hljs-params">name, ctx</span>) =&gt;</span> {
    <span class="hljs-comment">// do smth</span>
});
</code></pre>
<p>This will be call only if and after interaction is handled by command
(which in normal situation, <em>always</em>)</p>

        </article>
    </body>
    <style>
        body {
            font-family: "Inter";
            width: 100vw;
            background-color: #f4e1d4;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        h1 {
            font-weight: 900 !important;
        }

        li::marker {
            content: "";
        }

        article {
            margin: 0 auto;
            padding: 2rem;
            width: 100vw;
            background-color: white;
            min-height: 100vh;
        }

        @media (min-width: 1024px) {
            article {
                width: 66vw;
            }
        }

        @media (min-width: 1536px) {
            article {
                width: 50vw;
            }
        }
    </style>
</html>